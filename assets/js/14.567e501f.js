(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{570:function(a,s,t){"use strict";t.r(s);var n=t(13),r=Object(n.a)({},(function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h2",{attrs:{id:"arraylist注意事项"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#arraylist注意事项"}},[a._v("#")]),a._v(" ArrayList注意事项")]),a._v(" "),t("ol",[t("li",[a._v("permits all elements, including null ,ArrayList 可以加入null,并且多个")]),a._v(" "),t("li",[a._v("ArrayList基本等同于Vector，除了 ArrayList是线程不安全(执行效率高)看源码，在多线程情况下，不建议使用ArrayList")]),a._v(" "),t("li",[a._v("ArrayList是由数组来实现数据存储的（源码）")])]),a._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("public")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("class")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("ArrayListDetail")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("public")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("static")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("void")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("main")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("String")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" args"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("ArrayList")]),a._v(" arrayList "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("new")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("ArrayList")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//1)permits all elements, including null ,ArrayList 可以加入null,并且多个")]),a._v("\n        arrayList"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("add")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("null")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        arrayList"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("add")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("null")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("System")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("out"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("println")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("arrayList"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//[null, null]")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//2)ArrayList基本等同于Vector，除了 ArrayList是线程不安全(执行效率高)看源码，在多线程情况下，不建议使用ArrayList。")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//  多线程可考虑用Vector")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("/*\n        public boolean add(E e) {//ArrayList是线程不安全  没有synchronized\n            ensureCapacityInternal(size + 1);  // Increments modCount!!\n            elementData[size++] = e;\n        return true;\n        }*/")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//3）ArrayList是由数组来实现数据存储的(源码)")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//        ArrayList arrayList = new ArrayList();")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//        arrayList.add(null);")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v('//        arrayList.add("jack");')]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//        arrayList.add(null);")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v('//        arrayList.add("lpy");')]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//        System.out.println(arrayList);")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br"),t("span",{staticClass:"line-number"},[a._v("10")]),t("br"),t("span",{staticClass:"line-number"},[a._v("11")]),t("br"),t("span",{staticClass:"line-number"},[a._v("12")]),t("br"),t("span",{staticClass:"line-number"},[a._v("13")]),t("br"),t("span",{staticClass:"line-number"},[a._v("14")]),t("br"),t("span",{staticClass:"line-number"},[a._v("15")]),t("br"),t("span",{staticClass:"line-number"},[a._v("16")]),t("br"),t("span",{staticClass:"line-number"},[a._v("17")]),t("br"),t("span",{staticClass:"line-number"},[a._v("18")]),t("br"),t("span",{staticClass:"line-number"},[a._v("19")]),t("br"),t("span",{staticClass:"line-number"},[a._v("20")]),t("br"),t("span",{staticClass:"line-number"},[a._v("21")]),t("br"),t("span",{staticClass:"line-number"},[a._v("22")]),t("br"),t("span",{staticClass:"line-number"},[a._v("23")]),t("br"),t("span",{staticClass:"line-number"},[a._v("24")]),t("br")])]),t("h3",{attrs:{id:"arraylist底层操作机制源码分析"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#arraylist底层操作机制源码分析"}},[a._v("#")]),a._v(" ArrayList底层操作机制源码分析")]),a._v(" "),t("ol",[t("li",[a._v("ArrayList中维护了一个0bject类型的数组elementData.\ntransient Object[] elementData;"),t("br"),a._v("\ntransient 瞬间的，短暂的，表示该属性不会被序列化"),t("br"),t("img",{staticStyle:{zoom:"80%"},attrs:{src:"D:\\localCode\\ymtd-blog\\blog\\blogs\\category1_Java\\JavaBasics\\Image\\arraylist01.png",alt:"arraylist01"}}),a._v(" "),t("img",{attrs:{src:"D:%5ClocalCode%5Cymtd-blog%5Cblog%5Cblogs%5Ccategory1_Java%5CJavaBasics%5CImage%5Carraylist02.png",alt:"arraylist02"}})]),a._v(" "),t("li",[a._v("当创建ArrayList对象时，如果使用的是无参构造器，则初始elementData容量为0，第1次添加，则扩容elementData为10，如需要再次扩容，则扩容elementData为1.5倍。")]),a._v(" "),t("li",[a._v("如果使用的是指定大小的构造器，则初始elementData容量为指定大小，如果需要扩容, 则直接扩容elementData为1.5倍。")])]),a._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("ArrayList")]),a._v(" list "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("new")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("ArrayList")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//使用for循环添加1-10数据")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("for")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("int")]),a._v(" i "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" i "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("10")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" i"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("++")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    list"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("add")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("i"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//使用for循环添加11-15数据")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("for")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("int")]),a._v(" i "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("11")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" i "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("15")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" i"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("++")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    list"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("add")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("i"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\nlist"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("add")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("100")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\nlist"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("add")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("200")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\nlist"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("add")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("null")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("for")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Object")]),a._v(" o "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v("list"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("System")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("out"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("println")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("o"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br"),t("span",{staticClass:"line-number"},[a._v("10")]),t("br"),t("span",{staticClass:"line-number"},[a._v("11")]),t("br"),t("span",{staticClass:"line-number"},[a._v("12")]),t("br"),t("span",{staticClass:"line-number"},[a._v("13")]),t("br"),t("span",{staticClass:"line-number"},[a._v("14")]),t("br"),t("span",{staticClass:"line-number"},[a._v("15")]),t("br")])]),t("h4",{attrs:{id:"无参构造器-创建和使用arraylist的源码"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#无参构造器-创建和使用arraylist的源码"}},[a._v("#")]),a._v(" 无参构造器，创建和使用ArrayList的源码")]),a._v(" "),t("p",[a._v("（先进行自动装箱）"),t("br"),a._v("\n创建空的elementData数组"),t("br"),a._v(" "),t("img",{attrs:{src:"blogs/category1_Java/JavaBasics/Image/ArrayList1.png",alt:"1"}}),t("br"),a._v("\n执行list.add(1.先确认大小，是否要扩容；2.然后再执行赋值"),t("br"),a._v("\n重点分析ensureCapacityInternal方法"),t("br"),a._v(" "),t("img",{attrs:{src:"blogs/category1_Java/JavaBasics/Image/ArrayList2.png",alt:"2"}}),t("br"),a._v("\n该方法确定最小容量minCapacity"),t("br"),a._v("\n（1）第一次扩容为10"),t("br"),a._v(" "),t("img",{attrs:{src:"blogs/category1_Java/JavaBasics/Image/ArrayList3.png",alt:"3"}}),t("br"),a._v("\n（1）modCount++ 记录集合被修改的次数  防止多线程操作出现的异常"),t("br"),a._v("\n（2）如果elementData大小不够，就调用grow（）去扩容"),t("br"),a._v(" "),t("img",{attrs:{src:"blogs/category1_Java/JavaBasics/Image/ArrayList4.png",alt:"4"}}),t("br"),a._v("\n（1）扩容"),t("br"),a._v("\n（2）使用扩容机制确定扩大多少"),t("br"),a._v("\n（3）第一次newCapacity = 10"),t("br"),a._v("\n（4）第二次及以后按照1.5倍扩容（扩容使用的是Arrays.copyOf（），可保留原来的数据）"),t("br"),a._v(" "),t("img",{attrs:{src:"blogs/category1_Java/JavaBasics/Image/ArrayList5.png",alt:"5"}}),t("br"),a._v("\n逐层返回到add（）方法"),t("br"),a._v("\n之后，不再执行 grow（），继续回到add（） 执行"),t("br"),a._v(" "),t("img",{attrs:{src:"blogs/category1_Java/JavaBasics/Image/ArrayList6.png",alt:"6"}}),t("br"),a._v("\n执行到11次时，扩容"),t("br"),a._v(" "),t("img",{attrs:{src:"blogs/category1_Java/JavaBasics/Image/ArrayList7.png",alt:"7"}}),t("br"),a._v("\n开始扩容"),t("br"),a._v(" "),t("img",{attrs:{src:"blogs/category1_Java/JavaBasics/Image/ArrayList8.png",alt:"8"}}),t("br"),a._v("\n回到add（），11放在索引为10的位置"),t("br"),a._v(" "),t("img",{attrs:{src:"blogs/category1_Java/JavaBasics/Image/ArrayList9.png",alt:"9"}}),t("br")]),a._v(" "),t("h4",{attrs:{id:"arraylist-list-new-arraylist-8"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#arraylist-list-new-arraylist-8"}},[a._v("#")]),a._v(" //ArrayList list = new ArrayList(8);")]),a._v(" "),t("h4",{attrs:{id:"有参构造器-创建和使用arraylist的源码"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#有参构造器-创建和使用arraylist的源码"}},[a._v("#")]),a._v(" 有参构造器，创建和使用ArrayList的源码")]),a._v(" "),t("p",[a._v("创建指定大小的elementData数组 this.elementData = new Object[capacity]"),t("br"),a._v(" "),t("img",{attrs:{src:"blogs/category1_Java/JavaBasics/Image/ArrayList10.png",alt:"10"}}),t("br"),a._v(" "),t("img",{attrs:{src:"blogs/category1_Java/JavaBasics/Image/ArrayList11.png",alt:"11"}}),t("br"),a._v(" "),t("img",{attrs:{src:"blogs/category1_Java/JavaBasics/Image/ArrayList12.png",alt:"12"}}),t("br"),a._v("\n如果是有参构造器，那么扩容机制"),t("br")]),a._v(" "),t("ol",[t("li",[a._v("第一次扩容就按照elementData的1.5倍扩容")]),a._v(" "),t("li",[a._v("整个执行流程与无参构造器类似")])])])}),[],!1,null,null,null);s.default=r.exports}}]);